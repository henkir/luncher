apply plugin: 'eclipse'

import org.gradle.plugins.ide.eclipse.model.SourceFolder
eclipse.classpath.file {
    beforeMerged { cp ->
        cp.entries.clear()
    }
    whenMerged { cp ->
        cp.entries.findAll { it instanceof SourceFolder && it.path.startsWith("src/main/") }*.output = "build/classes/main/"
        cp.entries.findAll { it instanceof SourceFolder && it.path.startsWith("src/test/") }*.output = "build/classes/test/"
        cp.entries.findAll { it instanceof SourceFolder && it.path.startsWith("src/integration/") }*.output = "build/classes/integration/"
        cp.entries.removeAll { it.kind == "output" }
    }
}
